name: Deploy to Production

on:
  workflow_run:
    workflows: ["CI DevOps 2024"]
    types:
      - completed

jobs:
  deploy:
    if: ${{ github.event.workflow_run.conclusion == 'success' }}
    runs-on: ubuntu-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Run Ansible Playbook
      run: |
        ansible-playbook -i /ansible/inventories/setup.yml /ansible/playbook.yml
